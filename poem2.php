<!DOCTYPE html>
<html>

<head>
	<?php include 'html_head.php'; ?>
</head>

<body class="poem-bg">
	<?php include 'topmenu.php'; ?>

	<section class="poemWrap">
		<div class="poem-aniWrap two">
			<div class="bigpoem"><img src="images/bigpoem.png"></div>
			<div class="poem-bottle"><img src="images/poem-pic-2.png"></div>
		</div>

		<div class="deco-1">
			<img src="images/poem-deco.svg" class="show-for-large">
			<img src="images/poem-deco-mobile.svg" class="hide-for-large">
		</div>

		<ul class="poem-catList">
			<li><a href="poem.php">
					<div class="title">
						<i>財</i>
						<i>神</i>
						<i>靈</i>
						<i>籤</i>
					</div>
				</a></li>
			<li class="current">
				<div class="title">
					<i>月</i>
					<i>老</i>
					<i>靈</i>
					<i>籤</i>
				</div>
			</li>
		</ul>

		<div class="poem-container" data-img="images/poem-repeat.svg">
			<div class="item">
				<div class="bg"><img src="images/poem-2.svg"></div>

				<div class="num-sliderWrap flex-container align-middle">
					<div class="deco-gradient is-top"></div>
					<div class="deco-gradient is-bot"></div>

					<div class="text">第</div>

					<!-- Slider main container -->
					<div class="swiper-container num-slider-container">
						<!-- Additional required wrapper -->
						<div class="swiper-wrapper">
							<!-- Slides -->
							<div class="swiper-slide">一</div>
							<div class="swiper-slide">二</div>
							<div class="swiper-slide">三</div>
							<div class="swiper-slide">四</div>
							<div class="swiper-slide">五</div>
							<div class="swiper-slide">六</div>
						</div>

						<div class="deco">
							<img src="images/poem-num-deco.png" class="show-for-large">
							<img src="images/poem-num-deco-mobile.png" class="hide-for-large">
						</div>
					</div>

					<div class="text">籤</div>
				</div>

				<div class="btn"><img src="images/poem-btn.svg"></div>
			</div>
		</div>
	</section>


	<div class="poem-detail-bg"></div>
	<div class="poem-detail-backdrop"></div>

	<section class="poem-detailWrap">
		<div class="back show-for-large">
			<img src="images/pd-poem-back.png" class="show-for-large">
			<img src="images/pd-poem-back-mobile.png" class="hide-for-large">
		</div>

		<div class="poem-detail-innerWrap">
			<div class="deco-ink show-for-large"><img src="images/pd-poem-ink.png"></div>

			<div class="head">
				<i>第</i>
				<i>六</i>
				<i>籤</i>
			</div>

			<div class="poem-area">
				<div class="title-area flex-container align-middle">
					<div class="deco-1 show-for-large"><img src="images/pd-poem-deco.png"></div>
					<div class="deco-2 show-for-large"><img src="images/pd-poem-deco.png"></div>

					<div class="title">相如完璧歸趙
						<div class="deco-1 hide-for-large"><img src="images/pd-poem-deco.png"></div>
						<div class="deco-2 hide-for-large"><img src="images/pd-poem-deco.png"></div>
					</div>
					<div class="note">甲己　下下</div>
				</div>
				<div class="content">
					何勞鼓瑟更吹笙<br>
					寸步如登萬里程<br>
					彼此懷疑不相信<br>
					休將私意憶濃情<br>
				</div>
			</div>

			<ul class="explainList">
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
				<li>
					<div class="title">典故</div>
					<div class="content">戰國。藺相如。趙人也。時趙有良璧。秦請易以十五城。相如奉璧入秦。而秦負約。 相如將璧先使舍人懷歸。以理折服秦王。完璧歸趙。相如在趙。秦終不能勝趙。</div>
				</li>
			</ul>

			<div class="back hide-for-large">
				<img src="images/pd-poem-back-mobile.png">
			</div>
		</div>
	</section>
</body>

<?php include 'script.php'; ?>

</html>

<script>
	$(window).on("scroll", function() {
		var _scrollTop = $(this).scrollTop()

		if (_scrollTop >= 10000) {
			$(".logo-fixed, .topmenuWrap").removeClass("is-red")
		} else {
			$(".logo-fixed, .topmenuWrap").addClass("is-red")
			$(".topmenu-bg").removeClass("is-show")
		}
	}).trigger("scroll")






	var $num = new Swiper('.num-slider-container', {
		loop: false,
		speed: 500,
		slidesPerView: 1,
		spaceBetween: 5,
		centeredSlides: true,
		keyboard: true,
		grabCursor: true,
		direction: 'vertical',
		mousewheel: {
			invert: false,
		},
	});




	// const scrollContainer = $(".poem-detail-innerWrap").get(0);

	// scrollContainer.addEventListener("wheel", (e) => {
	// 	e.preventDefault();
	// 	scrollContainer.scrollLeft += e.deltaY;
	// });





	$(".poem-container .btn").on("click", function() {
		// $(".poem-detailWrap").addClass("is-show")

		$poem_tl.play()
	})


	$(".poem-detailWrap .back").on("click", function() {
		$(".poem-detailWrap").removeClass("is-show")
	})





	$(".poem-container").ryderRepeat({
		img: $(".poem-container").data("img"),
		size: 14
	})




	gsap.to(".poem-aniWrap", {
		delay: 2,
		duration: 2,
		opacity: 1,
		y: 0,
	})


	// var $poem_tl = gsap.timeline({
	// 	paused: true,
	// 	onComplete: function() {
	// 		$(".poem-detailWrap").addClass("is-show")

	// 		gsap.delayedCall(1, () => {
	// 			$poem_tl.seek(0)
	// 			$poem_tl.pause()
	// 		});
	// 	}
	// }).to(".bigpoem", {
	// 	duration: 1,
	// 	opacity: 1,
	// 	top: -140,
	// 	left: 63,
	// }).to(".bigpoem", {
	// 	duration: 2,
	// 	x: () => {
	// 		var _l = $(".bigpoem").offset().left - $(".bigpoem").width() * 0.6
	// 		return -_l
	// 	},
	// 	y: () => {
	// 		var _t = $(".bigpoem").offset().top - 40
	// 		return -_t
	// 	},
	// 	scale: 1,
	// }).set(".logo-fixed", {
	// 	zIndex: 19,
	// }, "<").to(".poem-detail-backdrop", {
	// 	duration: 1,
	// 	opacity: 1,
	// 	ease: 'power1.out',
	// }).to(".poem-detail-bg", {
	// 	duration: 2,
	// 	x: 0,
	// 	ease: 'power3.out',
	// }, "<").to(".poem-bottle, .poem-container", {
	// 	duration: 2,
	// 	yPercent: 100,
	// 	opacity: 0,
	// }, "<").to(".poemWrap .deco-1, .poem-catList", {
	// 	duration: 2,
	// 	x: 200,
	// 	opacity: 0,
	// }, "<")

	if (window.innerWidth < 1025) {
		var $poem_tl = gsap.timeline({
			paused: true,
			onComplete: function() {
				$(".poem-detailWrap").addClass("is-show")

				gsap.delayedCall(1, () => {
					$poem_tl.seek(0)
					$poem_tl.pause()
				});
			}
		}).to(".bigpoem", {
			duration: 1,
			opacity: 1,
			top: -140,
			left: 63,
			// rotationZ: 90
		}).to(".bigpoem", {
			duration: 2,
			x: () => {
				var _l = - ($(window).width() * 0.5 - $(".bigpoem"). width()* 0.45);
				return -_l
			},
			y: () => {
				var _t = $(".bigpoem").offset().top - $(".bigpoem").height()* 0.25;
				return -_t
			},
			scale: 0.7,
		}).set(".logo-fixed", {
			zIndex: 19,
		}, "<").to(".poem-detail-backdrop", {
			duration: 1,
			opacity: 1,
			// rotationZ: 90,
			ease: 'power1.out',
		}).to(".poem-detail-bg", {
			duration: 2,
			y: 0,
			ease: 'power3.out',
		}, "<").to(".poem-bottle, .poem-container", {
			duration: 2,
			yPercent: 100,
			opacity: 0,
		}, "<").to(".poemWrap .deco-1, .poem-catList", {
			duration: 2,
			y: 200,
			opacity: 0,
		}, "<")
	} else {
		const scrollContainer = $(".poem-detail-innerWrap").get(0);
		
		scrollContainer.addEventListener("wheel", (e) => {
			e.preventDefault();
			scrollContainer.scrollLeft += e.deltaY;
		});
		var $poem_tl = gsap.timeline({
			paused: true,
			onComplete: function() {
				$(".poem-detailWrap").addClass("is-show")

				gsap.delayedCall(1, () => {
					$poem_tl.seek(0)
					$poem_tl.pause()
				});
			}
		}).to(".bigpoem", {
			duration: 1,
			opacity: 1,
			top: -140,
			left: 63,
			// left: -200,

		}).to(".bigpoem", {
			duration: 2,
			x: () => {
				var _l = $(".bigpoem").offset().left - $(".bigpoem").width() * 0.6
				return -_l
			},
			y: () => {
				var _t = $(".bigpoem").offset().top - 40
				return -_t
			},
			scale: 1,
		}).set(".logo-fixed", {
			zIndex: 19,
		}, "<").to(".poem-detail-backdrop", {
			duration: 1,
			opacity: 1,
			ease: 'power1.out',
		}).to(".poem-detail-bg", {
			duration: 2,
			x: 0,
			ease: 'power3.out',
		}, "<").to(".poem-bottle, .poem-container", {
			duration: 2,
			xPercent: 100,
			opacity: 0,
		}, "<").to(".poemWrap .deco-1, .poem-catList", {
			duration: 2,
			y: 200,
			opacity: 0,
		}, "<")
	}
</script>